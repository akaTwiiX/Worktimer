<div class="register">
    @if (isLoading) {
    <mat-spinner></mat-spinner>
    } @else {
    <form class="register-form">
        <div>
            <h2>Registrieren</h2>
        </div>

        <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput type="email" [formControl]="emailFormControl" placeholder="beispiel@email.de">
            @if (emailFormControl.hasError('email') && !emailFormControl.hasError('required')) {
            <mat-error>Bitte geben Sie eine gültige E-Mail-Adresse ein</mat-error>
            }
            @if (emailFormControl.hasError('required')) {
            <mat-error>E-Mail ist erforderlich</mat-error>
            }
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Passwort</mat-label>
            <input matInput type="password" [formControl]="passwordFormControl" placeholder="Mindestens 8 Zeichen">
            @if (passwordFormControl.hasError('minlength')) {
            <mat-error>Passwort muss mindestens 8 Zeichen lang sein</mat-error>
            }
            @if (passwordFormControl.hasError('required')) {
            <mat-error>Passwort ist erforderlich</mat-error>
            }
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Passwort wiederholen</mat-label>
            <input matInput type="password" [formControl]="passwordConfirmFormControl" placeholder="Passwort bestätigen">
            @if (passwordConfirmFormControl.hasError('minlength')) {
            <mat-error>Passwort muss mindestens 8 Zeichen lang sein</mat-error>
            }
            @if (passwordConfirmFormControl.hasError('required')) {
            <mat-error>Passwort-Bestätigung ist erforderlich</mat-error>
            }
        </mat-form-field>

        @if (errorMessage) {
        <div class="message error">{{errorMessage}}</div>
        }
        
        @if (successMessage) {
        <div class="message success">{{successMessage}}</div>
        }

        <div class="btn-container">
            <button mat-raised-button color="primary"
                    [disabled]="!emailFormControl.valid || !passwordFormControl.valid || !passwordConfirmFormControl.valid"
                    (click)="register()">
                Registrieren
            </button>
        </div>

        <div class="link-container">
            <a routerLink="/login">Bereits registriert? Zum Login</a>
        </div>
    </form>
    }
</div>
